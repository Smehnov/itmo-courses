# Миссия 1 - В Самое Пекло

![header](/assets/lab-1-header.png)

Несмотря на название, мы надеемся, что особых проблем не возникнет.

## Часть 0. Etherscan

> Мы не успели поделать запросы к etherscan api, но надеемся, что вы сможете разобраться с задачей самостоятельно. Надеемся, что про сам [etherscan.io](http://etherscan.io) вам уже рассказал Александр Александрович :)

Описание АПИ расположено по адресу [https://docs.etherscan.io/](https://docs.etherscan.io/)

![Etherscan docs screenshot](/assets/etherscan_docs.png)

**Задание:**

- Получить количество eth по адресу ___
- Получить Total Supply ERC-20 токена ___

**Вам понадобится:**

1. Зарегистрироваться(см. слева в доке секция Creating an account)
2. Получить АПИ ключ (секция Getting an API key)
3. Найти в документации, как получить баланс определенного кошелька
4. Выполнить запрос для вашего варианта
5. Написать в ответе url, которую вы использовали для запроса и полученный баланс кошелька(это рандомный кошелек, поэтому ответ может меняться со временем)
6. Найти в интернете адрес контракта, который использует ERC-20 токен
    
    [How to find contract address](/assets/how_to_find_etherscan_address.mp4)
    
7. Найти в документации нужный метод и получить Token Supply
8. Написать запрос и полученное значение в ответ
9. Проверьте, что не слили важные данные в ответе
10. Вы великолепны!

| Вариант | ETH address | ERC-20 token |
| --- | --- | --- |
| 1 | 0x8a8257a8ab7c922ac543aeb49cc439e9929ef43b | DAI |
| 2 | 0xdf45d37fc99d973a50aa25c6f350f134fa9a45ee | XRT |
| 3 | 0x8ddd1eb0b0ddaf2361f1a2d0c76994908c24c74f | SHIB |
| 4 | 0xc76aa573b6d36382de6541d9eae13df1c4f73d56 | USDC |

## Часть 1.  Вопросы
Мы хотим проверить ваше понимание материала лекции и надеемся, что в процессе ответа на вопросы информация лучше уложится у вас в голове.

Вам можно(а скорее даже нужно) гуглить, но ответ должен быть сформулирован самостоятельно.
### Вопрос 1
Каким почтовым сервисом(мэйл ру, яндекс, gmail) пользуются в Театре Сказки([https://teatrskazki.spb.ru/](https://teatrskazki.spb.ru/))? В ответе расскажите, как нашли эту информацию. (Подсказка: типы dns записей )
### Вопрос 2
Когда при запросе к АПИ можно использовать body, а когда не обойтись без query params?
### Вопрос 3
Допустим, мы хотим отправить изображение, используя АПИ какого-нибудь сервиса. Кажется, что ни в query params, ни в JSON body файл не засунешь. Что нужно использовать в таком случае?
### Вопрос 4
Наверняка, помимо отправки  `<ПРЕДЫДУЩИЙ ОТВЕТ>`, есть способ вставить файл прямо в json body запроса. Как это можно сделать? (нет, не вставить ссылку) Какие будут минусы у этого подхода?
### Вопрос 5 
Вы занимаетесь разработкой фронтенда внутреннего портала для небольшого интернет магазина.  В базе данных хранится информация о **10000 заказов**, информация о **каждом заказе** занимает **1КБ в памяти**. Собирательный **клиент** сделал **10 заказов** за все время. Вам не дали доступ к базе данных, но у компании есть **внутренний АПИ** для получения заказов /orders, к которому вам предоставили доступ. Так получилось, что **любой запрос** к АПИ требует **20мс** времени на получение данных, при этом у сервера **интернет канал** имеет ограничение в **100 мбит/с.**

![Bandwidth task schema](/assets/bandwidth_task_schema.png)

Примеры запросов:

GET `/orders` - возвращает все заказы в вашей системе

GET `/orders/<ID>` - возвращает заказ с заданным номером

GET `/orders?client_email=<email>` - возвращает все заказы, связанные с пользователем по его почте

GET `/orders?client_phone=<email>` - возвращает все заказы, связанные с пользователем по его номеру телефона

GET `/orders?client_id=<client_id>` - возвращает все заказы, связанные с пользователем  по его id 

В информации о заказе хранится сумма, полученная от клиента. 

1. Вам нужно получить стоимость всех заказов, сделанных в вашей системе. Какой запрос вы используете и какого размера будет ответ от АПИ?
2. Для бонусной программы вам нужно добавить на сайт простую форму, которая принимает почту клиента и возвращает сумму денег потраченную этим пользователем. Вы решили не менять запрос и просто отфильтровать данные на стороне клиентского приложения. Сколько клиентов в минуту можно будет проверить через эту форму?
3. Вы решили использовать более эффективный вид запросов к АПИ. Какой? Сколько клиентов в минуту сотрудники компании смогут проверять через вашу форму?(считайте, что поток клиентов, которых нужно проверить, постоянен, а запросы отправляются последовательно)

## Часть 2. Buildship

> Мы используем [buildship.app](http://buildship.app) для наших экспериментов с различными АПИ и созданию собственных.

### Задача 1

Создать свой api endpoint /task1, который возвращает адрес eth кошелька из вашего варианта части 1 в формате

 `{”address”: “0x8a8257a8ab7c922ac543aeb49cc439e9929ef43b”}`

Пример результата: [https://eiy59b.buildship.run/task1](https://eiy59b.buildship.run/task1)

В ответе прикрепить скриншот из buildship и url вашего эндпоинта

### Задача 2

Создать свой api endpoint /task2, который принимает GET запрос вида 

 `{”address”: “<ANY ADDRESS>”}`

Затем делает запрос к api [etherscan.io](http://etherscan.io), чтобы получить eth баланс по адресу пользователя

Извлекает из запроса к etherscan баланс

Возвращает json вида 

`{”address”: “0x8a8257a8ab7c922ac543aeb49cc439e9929ef43b”, "balance": 1000000}`

В ответе прикрепить скриншот из buildship и url вашего эндпоинта

### Задача 3

Создать свой api endpoint /task2, который принимает POST запрос вида 

 `{”id”: “IMAGE_ID”}` , отправляет нужную картинку из [https://picsum.photos/](https://picsum.photos/)  в наш общий чат в телеграмме, и пересылает в ответе ответ от API телеграмма. Хоть в builship есть блок интеграции с телегой, вам требуется использовать API Call

В ответе прикрепить скриншот из buildship и url вашего эндпоинта